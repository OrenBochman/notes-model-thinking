<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-08-07">

<title>Lesson 7 - Tipping Points – notes-model-thinking</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-eefa51cfd4367a2c2ab6a47af1b603aa.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(images/banner_deep.jpg);
background-size: cover;
      }
</style>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">notes-model-thinking</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <h1 class="title">Lesson 7 - Tipping Points</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Model thinking</div>
                <div class="quarto-category">Tipping points</div>
                <div class="quarto-category">Percolation models</div>
                <div class="quarto-category">Contagion models</div>
                <div class="quarto-category">Diffusion</div>
                <div class="quarto-category">SIS model</div>
                <div class="quarto-category">R0</div>
                <div class="quarto-category">SIR model</div>
                <div class="quarto-category">Herd Immunity</div>
                <div class="quarto-category">Entropy</div>
                <div class="quarto-category">Diversity index</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta column-page-left">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 7, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sec-tipping-points" id="toc-sec-tipping-points" class="nav-link active" data-scroll-target="#sec-tipping-points">Tipping points</a></li>
  <li><a href="#sec-percolation-models" id="toc-sec-percolation-models" class="nav-link" data-scroll-target="#sec-percolation-models">Percolation models</a></li>
  <li><a href="#sec-contagion-models-1-diffusion" id="toc-sec-contagion-models-1-diffusion" class="nav-link" data-scroll-target="#sec-contagion-models-1-diffusion">Contagion models 1: Diffusion</a></li>
  <li><a href="#sec-contagion-models-2-sis-model" id="toc-sec-contagion-models-2-sis-model" class="nav-link" data-scroll-target="#sec-contagion-models-2-sis-model">Contagion models 2: SIS model</a></li>
  <li><a href="#sec-classifying-tipping-points" id="toc-sec-classifying-tipping-points" class="nav-link" data-scroll-target="#sec-classifying-tipping-points">Classifying tipping points</a></li>
  <li><a href="#sec-measuring-tips" id="toc-sec-measuring-tips" class="nav-link" data-scroll-target="#sec-measuring-tips">Measuring tips</a>
  <ul class="collapse">
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/OrenBochman/notes-model-thinking/edit/main/posts/w07.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/OrenBochman/notes-model-thinking/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full column-page-left" id="quarto-document-content">





<section id="sec-tipping-points" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-tipping-points">Tipping points</h2>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_straw_camel.jpg" class="img-fluid figure-img"></p>
<figcaption>Height of the camel</figcaption>
</figure>
</div></div><ul>
<li><strong>Tipping points are nonlinear models where a small change is leading to a big effect.</strong></li>
</ul>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Critical Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The straw that broke the Camel’s back is utterly ridiculous example. Here is perhaps a few better ones:</p>
</div>
</div>
<ol type="1">
<li>As the human body gains in muscle and loses fat it reaches a point where it can no longer float in water, at this point a swimmer must forever be treading water or swimming to keep afloat. The tipping point can also be viewed as drop survivability time for people in the sea.</li>
<li>The volume of an explosive reaches a tipping point when it is detonated.</li>
<li>Today most bridges can withstand cross winds. However in the past some bridge were not and cross wind during a storm could force a bridge to shake at its resonant frequency which caused it to break apart.</li>
</ol>
<p>Also here are some worse examples of tipping point</p>
<ol type="1">
<li>The drop in crime rate in New York is claimed by Malcom Gladwell to be an example of a tipping point. He suggested that “Broken Windows Theory” was what tipped crime rates in 1984 which was a policy of increasing the police force and getting them to crack down hard on misdemeanors like graffiti, jay-walking and free riding in the subway. Did this pretext of harassing minorities really motivated criminals to abandon crime, stop selling drugs, or emigrate to other cities with smaller police forces ?</li>
</ol>
<p>In <span class="citation" data-cites="donohue2001impact">Donohue III and Levitt (<a href="#ref-donohue2001impact" role="doc-biblioref">2001</a>)</span> a more convicting hypothesis for the decline of crime is presented. The economists also looked at other cities in the US that experienced similar dramatic drops in crime. What they report is that drops in crime rate took place in both rich cities that boosted trier police force and in poor cities that could not afford to. The point out that crimes follow a Pareto-distribution were 95% of all violent crime in big cities is due to a very small population of career criminals. They suggest that the drop was due to Roe Vs Wade passing about 18 years with the outcome that teen-agers and single mothers were able to avoid having children they could not support. The data required lots of massaging (murders are solved long after they are reported, there was a crack epidemic, some place had easier access to abortion etc,) And while this effect seems to occur globally in different localities after an 18 year lag this analysis has been challenged by others researchers several times. See also <a href="https://en.wikipedia.org/wiki/Legalized_abortion_and_crime_effect#cite_note-7">Legalized abortion and crime effect</a></p>
<p>A third hypothesis is that the crime levels are correlated with the use of leaded gasoline. Lead is highly toxic to the human brain.</p>
<p>Often when people think about tipping points, they think of kinks in curves. Sometimes a kink in a curve reflects a tipping point, but not always. In many cases these kinks are just exponential growth, because with exponential growth you have a curve that takes off at some point. A book about tipping points <span class="citation" data-cites="gladwell2006tipping">(<a href="#ref-gladwell2006tipping" role="doc-biblioref">Gladwell 2006</a>)</span>, written by <a href="https://en.wikipedia.org/wiki/Malcolm_Gladwell">Malcolm Gladwell</a>.</p>
<p>It is important to see what is a tip and what is not, and also what kind of models produce tips. Two famous models are the percolation model from physics and SIS model from epidemiology. Percolation refers to the question whether or not water can make its way through a certain layer, e.g.&nbsp;the ground or a coffee filter. <strong>SIS</strong> stands for susceptible, infected and susceptible again, which is a simple model for diseases.</p>
<p>There is a distinction between types of tips. There are direct tips and contextual tips. With a direct tip or active tip, a variable itself changes, which causes it to tip. e.g., a battle might tip a war. With a contextual tip something changes in the environment that makes it possible for the system to move from one state to another. e.g., the density of the trees could tip the spread of a forest fire.</p>
<p>A system can be stable (in equilibrium), periodic, random or complex. A system can tip from one state to another but there are also tips within classes. e.g., a system might tip from one equilibrium to another equilibrium.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_percolation_01.jpg" class="img-fluid figure-img"></p>
<figcaption>Percolation checker board</figcaption>
</figure>
</div></div></section>
<section id="sec-percolation-models" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-percolation-models">Percolation models</h2>
<p><a href="https://en.wikipedia.org/wiki/Percolation">Percolation</a> models come from physics. The idea is that water comes down in the form of rain and the question is does the water percolate through the soil or not? To make a model, you can simplify the situation by using a checkerboard. The idea is that water can only percolate from one filled box to another, including diagonal directions. In the example, the water can’t make it to the bottom.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_percolation_02.jpg" class="img-fluid figure-img"></p>
<figcaption>Percolation probability</figcaption>
</figure>
</div></div><p>The model is as follows. Assume that the graph is big. Let <em>p</em> be the probability that a box gets filled. Then we ask the question: does it percolate? As long as <em>p</em> is less than 59.2%, it doesn’t percolate. Above this value, the system tips, and then it suddenly becomes likely that it does percolate.</p>
<p>What is causing the tip? For <em>p</em> less than 59.2%, there just aren’t enough boxes filled in. However, when the values passes 59.2%, it suddenly becomes more likely that the water percolates to the bottom.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_percolation_03.jpg" class="img-fluid figure-img"></p>
<figcaption>Forest fire</figcaption>
</figure>
</div></div><p>This model can be applied to all kinds of things, for instance forest fires. In this case, you can use the checkerboard to represent trees, and the filled in boxes represent the density of the forest. e.g., you set the forest density to 57% and set fire to all trees on the left side in the model.</p>
<p>As you can see, the fire doesn’t make it to the other side, even after repeated attempts. If you push up forest density to 61%, nearly all attempts will show that the forest fire makes it to the other side. This is an example of the fertility of models. A model that was used to explain percolation, can also be used for forest fires.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_yield_curve.jpg" class="img-fluid figure-img"></p>
<figcaption>Forest yield curve</figcaption>
</figure>
</div></div><p>Curiously, the 59.2% threshold is also a tipping point in the yield curve of a forest. If you plant more trees, the yield of the forest in terms of wood produced rises in a linear fashion, until the tipping point, after which the yield will fall.</p>
<p>You can also apply this to banks. You can have a checkerboard of banks. If one bank fails then all banks that have loaned a lot of money to this bank may also fail. In this way bank failures can cascade.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_imf_bank_model.jpg" class="img-fluid figure-img"></p>
<figcaption>IMF bank model</figcaption>
</figure>
</div></div><p>The IMF has constructed models of banks that are more sophisticated. This model uses sophisticated accounting equations where banks have assets, capital, liabilities, and loans that are failing. You can then stress the system by having banks fail and see how far the failures spread.</p>
<p>This model is also based on the idea of percolation. In this model you can also ask the question whether there is a tipping point, where suddenly there are many bank failures? You could do the same with country failures.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_people_network.jpg" class="img-fluid figure-img"></p>
<figcaption>People network</figcaption>
</figure>
</div></div><p>You can also apply this on information percolating. Information spreads through networks of people. Assume that there is a probability that people will tell a piece of information to their friends, then you could ask what’s the likelihood that the information percolates as a function of this probability. The model would tell that if the piece of information, e.g.&nbsp;a gossip, is juicy enough, then it’s likely to spread.</p>
<p>Intuitively, you might think that there might be a linear relationship between the value of information and the number of people hearing of it, but if you use a network model with a probability of people telling the information across links, then nothing happens if the information is not very valuable, but once the value gets above some critical threshold, you might see a tipping point, and almost everybody will hear about it.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_percolation_04.jpg" class="img-fluid figure-img"></p>
<figcaption>From A to B</figcaption>
</figure>
</div></div><p>This can also be applied to innovations. e.g., people may have been working on some technology for years or decades, and then suddenly a lot of people figure it out at approximately the same time. e.g., for a long time nobody made a steam engine, and suddenly many people were building steam engines. We see often bursts of scientific activity in a particular area, e.g.&nbsp;biotechnology where many people work on the same innovation at the same time.</p>
<p>Why does the percolation model apply here? Often finding a solution for a particular type of problem, e.g.&nbsp;producing a car or getting a mathematical proof, requires getting from A to B. There are many parts that have to work together, and you need a significant number of partial solutions to get through the whole problem. For instance, for a car you need wheels, brakes, an engine and a steering wheel.</p>
<p>As information accumulates, we can fill in more squares, and eventually someone can find a path from A to B. Suddenly there are multiple paths so that others can find other paths from A to B. It is therefore plausible that the percolation model explains those bursts in scientific activity.</p>
</section>
<section id="sec-contagion-models-1-diffusion" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-contagion-models-1-diffusion">Contagion models 1: Diffusion</h2>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_diffusion.jpg" class="img-fluid figure-img"></p>
<figcaption>Diffusion graph</figcaption>
</figure>
</div></div><p>In a diffusion model everybody receives something, which could be information or a disease. The diffusion model works as follows:</p>
<ul>
<li>Suppose that there is some new disease called Wobblies,</li>
<li><span class="math inline">W_t</span> - is the number of people who got the Wobblies at time <span class="math inline">t</span>.</li>
<li><span class="math inline">N</span> is the total population.</li>
<li><span class="math inline">N - W_t</span> is therfore the number of healthy.</li>
<li><span class="math inline">τ</span> - is the transmission rate or the likelihood that someone sick infects someone healthy.</li>
</ul>
<p>So, if two people meet, then what is the likelihood that one person gives it to the other? <span id="eq-percolation-transmission-probability"><span class="math display">
\tau \times \frac{W_t}{N} \times \frac{(N-W_t )}{N} \qquad
\tag{1}</span></span></p>
<p>You need one person who has the Wobblies and one person that doesn’t have it. So the probability is</p>
<p>You can also apply this to a new technology being adopted or a piece of information being spread, but in those cases people don’t have to meet physically.</p>
<p>The spreading also depends on the contact rate <span class="math inline">c</span>, which is how often people meet, then <span class="math inline">cN</span> is the number of meetings. Hence,</p>
<p><span id="eq-percolation-progression"><span class="math display">
W_{t+1} = W_t + c\times N \times τ \times \frac{W_t}{N}\frac{(N-W_t )}{N} \qquad
\tag{2}</span></span></p>
<p>The formula says that the spread will start slow because only a few people are affected, then speed up where more people are affected, and then, when most people are affected, slows down again because there are fewer people that can be affected. The model has no tipping point.</p>
</section>
<section id="sec-contagion-models-2-sis-model" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-contagion-models-2-sis-model">Contagion models 2: SIS model</h2>
<p><span id="eq-SIS-model"><span class="math display">
\begin{aligned}
{\frac {dS}{dt}}&amp;=-{\frac {\beta SI}{N}}+\gamma I\\[6pt]{\frac {dI}{dt}}&amp;={\frac {\beta SI}{N}}-\gamma I
\end{aligned} \qquad
\tag{3}</span></span></p>
<p>The <a href="https://en.wikipedia.org/wiki/Compartmental_models_in_epidemiology#The_SIS_model">SIS model</a> is much like the diffusion model but there is a difference. After people have been infected, they can recover and move back to the susceptible state. Hence,</p>
<p><span id="eq-sis-progression"><span class="math display">
W_{t+1} = W_t + c\times N \times τ \times \frac{W_t}{N}\frac{(N-W_t )}{N} - a \times W_t \qquad
\tag{4}</span></span></p>
<p>where:</p>
<ul>
<li><em>a</em> is the recovery rate.</li>
</ul>
<p>This can be simplified to <span class="math display">
W_{t+1} = W_t (1 +(cτ\frac{(N - W_t)}{N} - a) )\qquad
</span></p>
<p>This model is interesting, because if the recovery rate is higher than the transmission rate, then the disease is not going to spread. This model has a tipping point.</p>
<p>If <span class="math inline">W_t</span> is very small, then <span class="math inline">\frac{N - W_t}{N} \approx 1</span> so <span class="math inline">W_t+1 = W_t(1 + cτ - a)</span>.</p>
<p>The disease is going to spread if <span class="math inline">cτ - a &gt; 0</span> or <span class="math inline">cτ &gt; a</span> or <span class="math inline">\frac{cτ}{a} &gt; 1</span>.</p>
<p><span class="math display">
R_0 \def \frac {cτ}{a}
</span></p>
<p>is the basic reproduction number <span class="math inline">R_0</span>.</p>
<ul>
<li>if <span class="math inline">R_0 &gt; 1</span> then the disease will spread.</li>
<li>If <span class="math inline">R_0 &lt; 1</span> the disease dies off.</li>
<li>The tipping point is 0.</li>
</ul>
<p>Diseases like measles (15), mumps (5) and flu (3) have <span class="math inline">R_0 &gt; 0</span>.</p>
<p>If you have had the measles or the mumps, you don’t become susceptible again, so here the SIR model applies.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_dynamic_model_01.jpg" class="img-fluid figure-img"></p>
<figcaption>Stable dynamic model</figcaption>
</figure>
</div></div><p>This model is interesting for policy decisions on how many people need to be vaccinated. Assume <em>V</em> to be the proportion of people vaccinated, then the altered basic reproduction number will be <span class="math inline">r0 = R0(1 - V)</span>. So, to keep the disease from spreading, we need <span class="math inline">r_0 &lt; 1</span> or <span class="math inline">R_0(1 - V) &lt; 1</span> or <span class="math inline">1 - \frac{1}{R_0} &lt; V</span>.</p>
<p>e.g., if we want to keep the measles from spreading, and measles has a <span class="math inline">R_0 = 15</span>, then we need <span class="math inline">1 - 1/15 = 14/15</span> of the people to be vaccinated.</p>
<p>There is also a tipping point with regard to vaccines. Below the tipping point only the people that are vaccinated are protected. Above the tipping point everyone is protected.</p>
<dl>
<dt>Herd Immunity</dt>
<dd>
<p>The tipping point for a population vaccination when <span class="math inline">1 - \frac{1}{R_0} &lt; V</span></p>
</dd>
</dl>
</section>
<section id="sec-classifying-tipping-points" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-classifying-tipping-points">Classifying tipping points</h2>
<p>The basic idea of a dynamical system is in the graph to the left. What does the graph say? If says that <em>x</em> is going to change over time. If <em>y</em> is positive, then <em>x</em> is going to change in the direction of the arrows on the left. However, if <em>y</em> is negative, then <em>x</em> is going to change in the direction of the arrows on the right. This system moves to a stable equilibrium where <em>x = y/2</em>.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_dynamic_model_02.jpg" class="img-fluid figure-img"></p>
<figcaption>Dynamic model with tipping point</figcaption>
</figure>
</div></div><p>More complicated graphs are possible. In the next graph, if <em>x &lt; 0.2</em> then it will move to 0, and if <em>x &gt; 0.2</em> then it will move to 0.5. In this case there are two stable equilibria, while and 0.2 is an unstable equilibrium or a tipping point. This is called a direct tip, where a slight change in a variable will cause the variable to move into another direction.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_dynamic_model_03.jpg" class="img-fluid figure-img"></p>
<figcaption>Contextual change</figcaption>
</figure>
</div></div><p>With a direct tip, a small change in the variable itself, can have a large effect on its end state. e.g., the assassination of Archduke Franz Ferdinand tipped the whole system so that Europe went to war. Often directs tips were destined to happen, because the environment has become supportive of such an event.</p>
<p>If more and more preconditions are met, then the percolation model suggests that it is going to happen anyway. e.g., in the eve of World War I, the European powers were already forming alliances and preparing for war. So, often what causes a direct tip, is a change in the context. This is a contextual tip.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_system_types.jpg" class="img-fluid figure-img"></p>
<figcaption>Types of systems</figcaption>
</figure>
</div></div><p>You can also apply this to the second graph. If you move down the line a little bit, then the system tips, and <em>x</em> will always move to 0. A contextual tip means that a small change in the environment has a large effect on the end state, often because of the number of squares filled in in the percolation model has reached the tipping point.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_state_switches.jpg" class="img-fluid figure-img"></p>
<figcaption>State switches</figcaption>
</figure>
</div></div><p>This also applies to the SIS model where <em>R0 = cτ - a</em> and if <em>R0 &gt; 1</em> then the disease spreads. If we change the virulence of the disease, or the rate at which people make contact, or the rate at which people recover, then the context changes.</p>
<p>A system can be stable (in equilibrium), periodic, random or complex. A system can tip from one class to another but there are also tips within classes. e.g., a system might tip from one equilibrium to another equilibrium. This can be represented in a graph that depicts the movement of a variable <em>x</em> depending on some other variable <em>r</em>.</p>

<div class="no-row-height column-margin column-container"><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/mt_active_tip.jpg" class="img-fluid figure-img"></p>
<figcaption>Active tip</figcaption>
</figure>
</div></div></section>
<section id="sec-measuring-tips" class="level2">
<h2 class="anchored" data-anchor-id="sec-measuring-tips">Measuring tips</h2>
<p>When measuring tips, we try to find out whether how likely the tip was going to happen. With an active or direct tip, the variable itself can cause the system to tip. If the system is at a tipping point, it is uncertain how it will behave. Once a tip has occurred, we know for certain how the system is going to behave. One way of measuring tippiness is by <em>reductions in uncertainty</em>.</p>
<p>A measure of uncertainty can be changes in the likelihood of different outcomes that could occur. Initially, there may be a large number of possible outcomes. After the system tips, there might be an equilibrium or one possible outcome, or a number of other things could occur. We measure changes in the likelihood of different outcomes using the diversity index, which is used in social sciences, and entropy, which comes from physics and information theory.</p>
<p>The <strong>diversity index</strong> for <em>i</em> possible outcomes is</p>
<p><span class="math display">
\frac{1}{\sum P_i^²}
</span></p>
<p>e.g., if we have three possible outcomes A, B and C, with probabilities</p>
<p><em>P(A) = 1/2</em>, <em>P(B) = 1/3</em> and <em>P(C) = 1/6</em>,</p>
<p>then the diversity index is</p>
<p><span class="math inline">1 / (1/4 + 1/9 + 1/36) = 36/14 ≈ 2.57</span>.</p>
<p>For <em>i</em> possible outcomes, the maximum diversity is <em>i</em>.</p>
<p>e.g., if we have four possible outcomes A, B, C and D, which all have a probability of 1/4, so</p>
<p><span class="math inline">P(A) = 1/4, P(B) = 1/4, P(C) = 1/4 and P(D) = 1/4</span>, then the diversity index is</p>
<p><span class="math inline">1 / ((1/4)² + (1/4)² + (1/4)² + (1/4)²) = 4.</span></p>
<p><strong>How can we use the diversity index to measure tips?</strong></p>
<p>If changes in a variable cause changes in the diversity index, this is indicative of a tip.</p>
<p>e.g., if initially there were three possible values, and the diversity index was 2.57, and then it flips to 1, the change in value of the diversity index is the measure of the tip.</p>
<p><strong>Entropy</strong> also measures the degree of uncertainty.</p>
<p>The formula for entropy is:</p>
<p><span class="math display">
-\sum_i P(X_i) log_2(P(X_i))
</span></p>
<p><em>log2</em> is the inverse of the power of 2, so <em>log2(2x) = x</em>. e.g., log2(1/4) = log2(2-2) = -2. e.g., if we have four possible outcomes A, B, C and D, which all have a probability of 1/4, then the entropy is - ((1/4)<em>log2(1/4) + (1/4)</em>log2(1/4) + (1/4)<em>log2(1/4) + (1/4)</em>log2(1/4)) = 2.</p>
<p>Entropy tells us the number of bits of information we need to know to identify the outcome. If we have four possible outcomes A, B, C and D, which all have a probability of 1/4, you can split up the possiblities in half. It is either in A, B or in C, D. This is one bit of information. If it is in C, D then you need to know whether it is C or D. This is the second bit of information. You can always find the answer by asking two questions. Hence, the entropy is 2.</p>
<p>The diversity index shows the number of types. The entropy is the amount of information you need to identify the type. e.g., if you have options A and B that each have a probability of 1/2, then the diversity index is 2 and the entropy is 1. After the system tips, the diversity index goes to 1 and the entropy becomes 0, and you don’t need to ask any question to know what the state of the system is. Tips are changes in the likelihood of outcomes.</p>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References</h3>
<p>Note: this page is based on the following source:</p>
<ul>
<li><span class="citation" data-cites="page2017modelthinking">(<a href="#ref-page2017modelthinking" role="doc-biblioref">Page 2014</a>)</span> MOOC, Course material &amp; Transcripts.</li>
<li>TA Notes by <span class="citation" data-cites="fisher2017modelthinking">(<a href="#ref-fisher2017modelthinking" role="doc-biblioref">Fisher 2014</a>)</span>.</li>
<li>Student notes by in <span class="citation" data-cites="kleinikink2016naturalmoney">(<a href="#ref-kleinikink2016naturalmoney" role="doc-biblioref">Klein Ikink 2016</a>)</span> and <span class="citation" data-cites="groh2017model">(<a href="#ref-groh2017model" role="doc-biblioref">Groh 2017</a>)</span>.</li>
</ul>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-donohue2001impact" class="csl-entry" role="listitem">
Donohue III, John J, and Steven D Levitt. 2001. <span>“The Impact of Legalized Abortion on Crime.”</span> <em>The Quarterly Journal of Economics</em> 116 (2): 379–420. <a href="https://pricetheory.uchicago.edu/levitt/Papers/DonohueLevittTheImpactOfLegalized2001.pdf">https://pricetheory.uchicago.edu/levitt/Papers/DonohueLevittTheImpactOfLegalized2001.pdf</a>.
</div>
<div id="ref-fisher2017modelthinking" class="csl-entry" role="listitem">
Fisher, Steve. 2014. <span>“Model Thinking – TA Notes.”</span> <a href="https://www.coursera.org/learn/model-thinking" class="uri">https://www.coursera.org/learn/model-thinking</a>; Coursera. November 2014.
</div>
<div id="ref-gladwell2006tipping" class="csl-entry" role="listitem">
Gladwell, M. 2006. <em>The Tipping Point: How Little Things Can Make a Big Difference</em>. Little, Brown.
</div>
<div id="ref-groh2017model" class="csl-entry" role="listitem">
Groh, Rainer. 2017. <span>“Model Thinking - Course Notes by Rainer Groh.”</span> <a href="https://aerospaceengineeringblog.com/wp-content/uploads/2017/11/ModelThinking.pdf" class="uri">https://aerospaceengineeringblog.com/wp-content/uploads/2017/11/ModelThinking.pdf</a>. November 2017.
</div>
<div id="ref-kleinikink2016naturalmoney" class="csl-entry" role="listitem">
Klein Ikink, Bart. 2016. <span>“Model Thinking.”</span> <a href="https://naturalmoney.org/modelthinking-01.html" class="uri">https://naturalmoney.org/modelthinking-01.html</a>. March 2016.
</div>
<div id="ref-page2017modelthinking" class="csl-entry" role="listitem">
Page, Scott E. 2014. <span>“Model Thinking [MOOC].”</span> <a href="https://www.coursera.org/learn/model-thinking" class="uri">https://www.coursera.org/learn/model-thinking</a>; Coursera. November 2014.
</div>
</div>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{2023,
  author = {},
  title = {Lesson 7 - {Tipping} {Points}},
  date = {2023-08-07},
  url = {https://orenbochman.github.io/notes-model-thinking/posts/w07.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-2023" class="csl-entry quarto-appendix-citeas" role="listitem">
<span>“Lesson 7 - Tipping Points.”</span> 2023. August 7, 2023. <a href="https://orenbochman.github.io/notes-model-thinking/posts/w07.html">https://orenbochman.github.io/notes-model-thinking/posts/w07.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2023-2025, Oren Bochman</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/OrenBochman/notes-model-thinking/edit/main/posts/w07.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/OrenBochman/notes-model-thinking/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with 💛 and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>